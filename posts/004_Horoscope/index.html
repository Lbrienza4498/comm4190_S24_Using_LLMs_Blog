<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.554">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Lucas Brienza">
<meta name="dcterms.date" content="2024-02-20">
<meta name="description" content="Guessing mine, my friend, and my mom’s sign">

<title>Prompting LLMs - AI plays detective on our Horoscopes</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Prompting LLMs</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">AI plays detective on our Horoscopes</h1>
                  <div>
        <div class="description">
          Guessing mine, my friend, and my mom’s sign
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">LLMs</div>
                <div class="quarto-category">prompting</div>
                <div class="quarto-category">guessing</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Lucas Brienza </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">February 20, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="a-deep-dive-into-our-zodiac-signs-as-told-by-ai" class="level1">
<h1>A Deep Dive into our Zodiac Signs, as told by AI</h1>
<p><img src="signs.jpg" width="300px"></p>
<section id="lucas-the-scorpio" class="level2">
<h2 class="anchored" data-anchor-id="lucas-the-scorpio">Lucas: The Scorpio</h2>
<p>In my opinion (I may be a bit biased), among the twelve horoscopes, Scorpio stands out with its dominating and electric personality. Born between October 23 and November 21, Scorpios are known for their passion, their mystery, and their undeniable presence.</p>
</section>
<section id="a-glimpse-into-a-scorpio" class="level2">
<h2 class="anchored" data-anchor-id="a-glimpse-into-a-scorpio">A Glimpse into a Scorpio</h2>
<p>Scorpios are the embodiment of depth and complexity. They are bold and ambitious, with a fiery spirit that drives them to lead and conquer. Yet, this intensity is a double-edged sword, as their impulsive nature can sometimes lead to recklessness.</p>
<section id="the-passionate-protector" class="level3">
<h3 class="anchored" data-anchor-id="the-passionate-protector">The Passionate Protector</h3>
<p>Scorpios are fiercely protective of their loved ones, often displaying a nurturing and sensitive side that belies their tough exterior. Also, their loyalty is unwavering, but this can also manifest as jealousy or possessiveness.</p>
</section>
</section>
<section id="a-case-study-in-scorpio-behavior" class="level2">
<h2 class="anchored" data-anchor-id="a-case-study-in-scorpio-behavior">A Case Study in Scorpio Behavior</h2>
<p><img src="scorpio.jpg" width="300px"></p>
<p>In an experiment I did with ChatGPT 4-1106-preview, my text messages were analyzed to guess my horoscope. The messages revealed that I was not only intense but passionate too (“I adore her”). I also was perceived to be analytical and protective (“I cared for Leah”). These characteristics align perfectly with the Scorpio profile.</p>
<p>Some of the texts in deeper detail were: “U read my mind was just about to tell u About her I adore her like we had a lot of fun together but I almost got the impression she was using Leah for a place to stay like she would be with us for an hour and then disappear or go to another place with school friends and like only post with them I didn’t care for me I cared for Leah she was amazing but that would’ve gotten on my nerves” “And he so sneakily called his Uber to go he was waiting to find something to get pissed off about so he had an excuse to leave meanwhile he tried to say it was one of us?? Like NOOO U WERE RUDE TO EVERYONE especially you which like don’t even get me started on that like don’t speak to people all slurry and condescending”</p>
<p>I started by asking ChatGPT 4-1106-preview the following: hello, please summarize the characterizations of each of the twelve horoscopes It answered me with this: <strong>Aries (March 21 - April 19)</strong> * Bold, ambitious, and competitive * Known for their leadership qualities and fiery spirit * Impulsive and sometimes reckless</p>
<p><strong>Taurus (April 20 - May 20)</strong> * Practical, reliable, and stubborn * Enjoy the finer things in life and value stability * Can be possessive and indulge in material comforts</p>
<p><strong>Gemini (May 21 - June 20)</strong> * Curious, communicative, and adaptable * Known for their duality and versatility * Can be superficial and indecisive</p>
<p><strong>Cancer (June 21 - July 22)</strong> * Intuitive, emotional, and protective * Nurturing and sensitive, but also moody * Can be clingy and overprotective</p>
<p><strong>Leo (July 23 - August 22)</strong> * Charismatic, confident, and attention-seeking * Natural leaders with a strong presence * Can be arrogant and egotistical</p>
<p><strong>Virgo (August 23 - September 22)</strong> * Analytical, organized, and perfectionistic * Practical and detail-oriented * Can be overly critical and have a tendency to worry</p>
<p><strong>Libra (September 23 - October 22)</strong> * Diplomatic, charming, and peace-loving * Value balance and harmony * Can be indecisive and avoid conflict</p>
<p><strong>Scorpio (October 23 - November 21)</strong> * Intense, secretive, and passionate * Known for their strong will and determination * Can be possessive and jealous</p>
<p><strong>Sagittarius (November 22 - December 21)</strong> * Adventurous, optimistic, and independent * Known for their love of travel and freedom * Can be restless and impulsive</p>
<p><strong>Capricorn (December 22 - January 19)</strong> * Ambitious, disciplined, and responsible * Hard-working and goal-oriented * Can be aloof and emotionally distant</p>
<p><strong>Aquarius (January 20 - February 18)</strong> * Independent, original, and humanitarian * Value individuality and progressive ideas * Can be aloof and detached</p>
<p><strong>Pisces (February 19 - March 20)</strong> * Imaginative, compassionate, and intuitive * Highly creative and sensitive * Can be escapist and have difficulty setting boundaries</p>
<p>So I said: Now, given these characterizations, I am going to provide you a compilation of text messages I’ve sent. based on them, please guess my horoscope: and it said….</p>
</section>
<section id="the-reveal" class="level2">
<h2 class="anchored" data-anchor-id="the-reveal">The Reveal</h2>
<p>The AI tool answered with: Based on the characterizations of the twelve horoscopes and the compilation of text messages you provided, it is likely that your horoscope is <strong>Scorpio</strong>.</p>
<p><strong>Evidence from the text messages:</strong></p>
<ul>
<li><strong>Intense and passionate:</strong> You express strong emotions and opinions, such as “I adore her” and “I am quite honestly floored.”</li>
<li><strong>Secretive:</strong> You mention that you “almost got the impression” that someone was using someone else, suggesting that you may have kept your suspicions to yourself.</li>
<li><strong>Possessive and jealous:</strong> You express concern that someone was “only posting with” their school friends and not with you, and you also mention that you “cared for Leah” and that it would have “gotten on [your] nerves” if someone was using her for a place to stay.</li>
<li><strong>Analytical and intuitive:</strong> You carefully analyze situations and people, such as when you say “that come across like it was this whole plan that was top secret” and “she caught herself and realized she sent that and it came across as rude.”</li>
</ul>
<p>While these text messages do not provide a complete picture of your personality, they do suggest that you have some of the key traits associated with the Scorpio horoscope.</p>
<p>I then asked: How confident are you that I’m a Scorpio?</p>
<p>It answered:Based on the text messages you provided, I am moderately confident that you are a Scorpio. The messages exhibit several traits that are commonly associated with the Scorpio horoscope, including:</p>
<ul>
<li><strong>Intensity and passion:</strong> You express strong emotions and opinions, such as “I adore her” and “I am quite honestly floored.”</li>
<li><strong>Secrecy:</strong> You mention that you “almost got the impression” that someone was using someone else, suggesting that you may have kept your suspicions to yourself.</li>
<li><strong>Possessiveness and jealousy:</strong> You express concern that someone was “only posting with” their school friends and not with you, and you also mention that you “cared for Leah” and that it would have “gotten on [your] nerves” if someone was using her for a place to stay.</li>
<li><strong>Analytical and intuitive:</strong> You carefully analyze situations and people, such as when you say “that come across like it was this whole plan that was top secret” and “she caught herself and realized she sent that and it came across as rude.”</li>
</ul>
<p>While these text messages do not provide a complete picture of your personality, they do suggest that you have some of the key traits associated with the Scorpio horoscope. However, it is important to note that astrology is not an exact science, and there are many factors that can influence a person’s personality.</p>
<p>If you are interested in learning more about your horoscope, I recommend that you consult with a professional astrologer who can provide you with a more detailed analysis of your birth chart.</p>
</section>
<section id="the-scorpio-sagittarius-cusp" class="level2">
<h2 class="anchored" data-anchor-id="the-scorpio-sagittarius-cusp">The Scorpio-Sagittarius Cusp</h2>
<p>I wanted to see if the AI tool could also guess my birthday. So, I asked the tool: can you guess my birthday given what you already know about me?</p>
<p>It answered: Based on the text messages you provided and the fact that you are a Scorpio, I would guess that your birthday is <strong>November 15th</strong>.</p>
<p>Here is my reasoning:</p>
<ul>
<li>Scorpios born between October 23rd and November 21st are said to be more intense, passionate, and secretive.</li>
<li>The text messages you provided exhibit these traits, such as when you say “I adore her” and “I am quite honestly floored.”</li>
<li>November 15th is the midpoint of the Scorpio season, which means that people born on this day are said to embody the most typical Scorpio traits.</li>
</ul>
<p>Of course, this is just a guess, and there are many other factors that can influence a person’s personality. However, I believe that November 15th is a strong possibility given the information you have provided.</p>
<section id="i-replied-with-my-birthday-is-actually-november-19th.-what-does-this-say-about-me" class="level3">
<h3 class="anchored" data-anchor-id="i-replied-with-my-birthday-is-actually-november-19th.-what-does-this-say-about-me">I replied with: My birthday is actually November 19th. What does this say about me?</h3>
<p>It said this: People born on November 19th are Scorpios with a Sagittarius rising. This means that you have a blend of the passionate and intense nature of Scorpio with the optimistic and adventurous spirit of Sagittarius.</p>
<p><strong>Key personality traits:</strong></p>
<ul>
<li><strong>Passionate and intense:</strong> You are a passionate and intense individual who is not afraid to go after what you want in life. You are also very loyal and protective of those you care about.</li>
<li><strong>Optimistic and adventurous:</strong> You are an optimistic and adventurous person who loves to explore new things and meet new people. You are also very independent and self-reliant.</li>
<li><strong>Intelligent and curious:</strong> You are an intelligent and curious person who loves to learn new things. You are also very creative and have a great sense of humor.</li>
</ul>
<p><strong>Strengths:</strong></p>
<ul>
<li>You are a strong and resilient person who is not afraid to face challenges head-on.</li>
<li>You are a loyal and supportive friend who is always there for those you care about.</li>
<li>You are a quick learner and have a great ability to adapt to new situations.</li>
</ul>
<p><strong>Weaknesses:</strong></p>
<ul>
<li>You can be too intense and passionate at times, which can sometimes lead to conflict.</li>
<li>You can be too optimistic and adventurous, which can sometimes lead to taking risks that you later regret.</li>
<li>You can be too independent and self-reliant, which can sometimes make it difficult to ask for help when you need it.</li>
</ul>
</section>
</section>
<section id="ai-did-good-at-first" class="level2">
<h2 class="anchored" data-anchor-id="ai-did-good-at-first">AI did good… at first</h2>
<p>I was so surprised to see how quick the tool got to the correct answer. I really saw myself having to prompt it multiple times to get Scorpio but I guess I am my sign through and through!</p>
</section>
<section id="darcy-the-leo-or-pisces-persona" class="level2">
<h2 class="anchored" data-anchor-id="darcy-the-leo-or-pisces-persona">Darcy: The Leo or Pisces Persona?</h2>
<p><img src="Pisces-Leo-Match-M.png" width="300px"> As I continued, I chose my best friend from home, Darcy, to be analyzed. She is a friend whose text messages are a window into her personality. Let’s dive in.</p>
</section>
<section id="a-glimpse-into-darcy" class="level2">
<h2 class="anchored" data-anchor-id="a-glimpse-into-darcy">A Glimpse into Darcy</h2>
<p>At first glance, Darcy’s messages paint her as a sensitive soul: concerned about perceptions, emotionally open, and introspective. #### “Does the angle of my insta story make me look fat” The AI tool told me that this text, for example, showed vulnerability in worrying about appearance with the sensitive nature of Pisces #### “plus im like in a sad mood dont wanna bother or burden you with that stuff cuz i know u like dont like when i hyper fixate lmao” This text shows Darcy’s hyper-awareness of her emotional state #### “I wanna just be like listen dude we had a great time that day and I don’t know what happened since then but like the way you responded w my grandma made me think to myself that like I just don’t know if you’re the best type of person to be in my life…” Here, Darcy’s intuitive side shines. Pisces are known for their introspection and willingness to leave negativity behind. #### “This is diff than how I used to think about her w my feelings. Like I said before it’s like I don’t like our friendship when it’s like this. It feels forced and I’m too high in my evolution as a human to tolerate those kinds of friendships…” Again, Darcy’s words reflect an introspective side to her</p>
</section>
<section id="plot-twist-darcys-true-sign-revealed" class="level2">
<h2 class="anchored" data-anchor-id="plot-twist-darcys-true-sign-revealed">Plot Twist: Darcy’s True Sign Revealed</h2>
<p>When I told the AI tool her birthday was August 16th and she was actually a Leo, they were too stunned to speak</p>
<p>They responded with: <strong>Leos</strong>: the zodiac’s fearless lions, exuding confidence and charisma. They are leaders, not followers, with a strong sense of self. Could she be a Leo with a strong Pisces influence? Or perhaps a Leo who is simply more in touch with her emotions and intuition?</p>
</section>
<section id="the-conclusion" class="level2">
<h2 class="anchored" data-anchor-id="the-conclusion">The Conclusion</h2>
<p>My chat with the AI tool sheds light on a new possibility: She possesses the confidence and self-assuredness of Leo, while also navigating the emotional depths typically associated with Pisces.</p>
</section>
<section id="ai-and-our-zodiacs" class="level2">
<h2 class="anchored" data-anchor-id="ai-and-our-zodiacs">AI and our Zodiacs</h2>
<p>What’s clear is that our astrological identities are not solely dictated by the stars under which we’re born. They are also sculpted by the individual journeys we go through and the emotional landscapes we traverse.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/Lbrienza4498\.github\.io\/comm4190_S24_Using_LLMs_Blog\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>